<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.aukey.report.mapper.stockverify.StockVerifyReportMapper" >
  <resultMap id="BaseResultMap" type="com.aukey.report.domain.stockverify.StockVerifyReport" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Mar 23 15:19:52 CST 2018.
    -->
    <id column="stock_verify_id" property="stockVerifyId" jdbcType="BIGINT" />
    <result column="sku_code" property="skuCode" jdbcType="VARCHAR" />
    <result column="wsku" property="wsku" jdbcType="VARCHAR" />
    <result column="sku_name" property="skuName" jdbcType="VARCHAR" />
    <result column="category_id" property="categoryId" jdbcType="INTEGER" />
    <result column="category_name" property="categoryName" jdbcType="VARCHAR" />
    <result column="department_name" property="departmentName" jdbcType="VARCHAR" />
    <result column="stock_id" property="stockId" jdbcType="INTEGER" />
    <result column="stock_name" property="stockName" jdbcType="VARCHAR" />
    <result column="system_box_number" property="systemBoxNumber" jdbcType="INTEGER" />
    <result column="system_single_box_number" property="systemSingleBoxNumber" jdbcType="INTEGER" />
    <result column="system_number_sum" property="systemNumberSum" jdbcType="INTEGER" />
    <result column="length" property="length" jdbcType="DECIMAL" />
    <result column="width" property="width" jdbcType="DECIMAL" />
    <result column="height" property="height" jdbcType="DECIMAL" />
    <result column="volume" property="volume" jdbcType="DECIMAL" />
    <result column="weight" property="weight" jdbcType="DECIMAL" />
    <result column="price" property="price" jdbcType="DECIMAL" />
    <result column="in_stock_count" property="inStockCount" jdbcType="INTEGER" />
    <result column="difference_quantity" property="differenceQuantity" jdbcType="INTEGER" />
  </resultMap>
  
  <select id="selectAll" resultMap="BaseResultMap" parameterType="map" >
    SELECT
		svr.stock_verify_id,
		svr.sku_code,
		svr.wsku,
		svr.sku_name,
		pmc.`name` AS category_name,
		cco.`name` AS department_name,
		pms.`name` AS stock_name,
		svr.system_box_number,
		svr.system_single_box_number,
		svr.system_number_sum,
		svr.length,
		svr.width,
		svr.height,
		svr.volume,
		svr.weight,
		svr.price,
		svr.in_stock_count,
		svr.difference_quantity
	FROM
		aukey_report.stock_verify_report svr
	LEFT JOIN product_ms.stock pms ON pms.stock_id = svr.stock_id 
	LEFT JOIN product_ms.sku pmsk ON pmsk.`code` = svr.sku_code
	LEFT JOIN product_ms.category pmc ON pmc.cate_id = pmsk.category_id
	LEFT JOIN cas.company_org cco ON cco.id = svr.department_id
	where 1=1 
	<if test="skuCodeList!=null and skuCodeList.size!=0">
		AND svr.sku_code in
		<foreach collection="skuCodeList" index="index" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</if>
	<if test="skuCode!=null">
		AND svr.sku_code like #{skuCode}
	</if>
	<if test="wsku!=null">
		AND svr.wsku like #{wsku}
	</if>
	<if test="wskuList!=null and wskuList.size!=0">
		AND svr.wsku in
		<foreach collection="wskuList" index="index" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</if>
	<if test="stockIdList!=null and stockIdList.size!=0">
		AND svr.stock_id in
		<foreach collection="stockIdList" item="item" open="(" close=")" index="index" separator=",">
			#{item}
		</foreach>
	</if>
	<if test="idList!=null and idList.size!=0">
		AND svr.stock_verify_id in
		<foreach collection="idList" item="item" open="(" close=")" index="index" separator=",">
			#{item}
		</foreach>
	</if>
	<if test="pageNumber!=null and pageSize!=null">
		limit #{pageNumber},#{pageSize}
	</if>
  </select>
  <select id="selectAllCount" parameterType="map" resultType="java.lang.Integer" >
  	SELECT
		COUNT(1)
	FROM
		aukey_report.stock_verify_report svr
	LEFT JOIN product_ms.stock pms ON pms.stock_id = svr.stock_id 
	LEFT JOIN product_ms.sku pmsk ON pmsk.`code` = svr.sku_code
	LEFT JOIN product_ms.category pmc ON pmc.cate_id = pmsk.category_id
	where 1=1 
	<if test="skuCodeList!=null and skuCodeList.size!=0">
		AND svr.sku_code in
		<foreach collection="skuCodeList" index="index" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</if>
	<if test="skuCode!=null">
		AND svr.sku_code like #{skuCode}
	</if>
	<if test="wsku!=null">
		AND svr.wsku like #{wsku}
	</if>
	<if test="wskuList!=null and wskuList.size!=0">
		AND svr.wsku in
		<foreach collection="wskuList" index="index" item="item" open="(" close=")" separator=",">
			#{item}
		</foreach>
	</if>
	<if test="stockIdList!=null and stockIdList.size!=0">
		AND svr.stock_id in
		<foreach collection="stockIdList" item="item" open="(" close=")" index="index" separator=",">
			#{item}
		</foreach>
	</if>
  </select>
</mapper>