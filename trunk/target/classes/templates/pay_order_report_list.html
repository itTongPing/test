<!DOCTYPE html>
<html lang="en" xmlns="://.w3.org/1999/xhtml" xmlns:th="://.thymeleaf.org">
<head>
    <meta charset="utf-8"/>
    <title>付款执行情况报表</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
   	<head th:include="decorators/tags/main" />
    <head th:include="decorators/tags/menuBaiyi" />
    <script th:src="@{'/js/common/commonAjax.js?v='+${version}}"></script>
    <style>
    .purchaseOrderWarp{
    	max-width: 120px;
    	overflow: hidden;
    	display:inline-block;
    	white-space:nowrap; 
    	text-overflow:ellipsis;
    }
    .form-group .text-supplier {
   		position: absolute;
		top: 50px;
		border: 2px solid #28bba2;
		padding-bottom: 10px;
		text-align: center;
		background-color: #fff;
		border-radius: 6px;
		width: -webkit-max-content;
		width: -moz-max-content;
		display: none;
		z-index: 100;
		height: 400px;
		overflow-y: auto;
		text-indent: 10px;
		min-width: 300px;
		word-wrap: normal;
		word-spacing: normal;
		white-space: nowrap;
		box-sizing: border-box;
		padding-right:20px;     
	}
    </style>
</head>
<body class="overflow-hidden" >
<div class="wrapper preload no-left">
    <ul class="breadcrumb">
        <li><span class="primary-font"><i class="icon-home"></i></span>供应链报表</li>
        <li>付款执行情况报表</li>
    </ul>
    <div class="main-container ">
        <div class="padding-md">
        <!-- 搜索栏 -->
        <div class="form-inline no-margin" >
	        <div class="fun-btn">
	        	<button onclick="confirmExportShow(this)" id="exoprtButton" class="btn btn-blue">导出</button>
	        </div>
			<div class="confirm" style="display: none; left: 112px; top: 81px; z-index: 100000000;">
				<div class="confirm_txt" style="line-height: 20px;height: 22px;">导出数据超过3万，系统将以邮件方式发送，是否确定导出</div>
				<span class="close_x" onclick="closeConfirm()">×</span>
				<button type="button" onclick="exportExcel()" class="btn marginTB-xs" style="background:#f27068;margin-left:16px;margin-right:5px;color:#fff">确认</button>
				<button type="button" onclick="closeConfirm()" class="btn marginTB-xs btn-primary" style="background:#f2cc3a9 !important;color:#fff">取消</button>
			</div>	        
            <div class="smart-widget-inner product_info">
                <div class="search-form-div">
                        <div class="search_l">
                        	<!-- 时间 -->
                            <div class="form-group">请款日期
                                <input size="16" type="text" id="billBeginDate" name="from_date" value="" placeholder="填写开始时间" class="form-control form_datetime"/>
                                <input size="16" type="text" id="billEndDate" name="to_date" value="" placeholder="填写结束时间" class="form-control form_datetime"/>
                            </div>
                            
                            <div class="form-group">请款单号
                                <input type="text" id="requestOrderId" name="requestOrderId" class="form-control" placeholder="输入请款单号进行检索"/>
                            </div>
                            <span>供应商</span>
							<div class="form-group supply" style="position: relative">
								<input type="text" id="supplierName" placeholder="输入供应商名称查询" class="form-control title_class"/>
								<div class="text-supplier">
									<table><thead>
											<tr><th>供应商名称</th></tr>
											</thead>
											<tbody id="supplierTbody"></tbody>
									</table>
                                 </div>
                            </div>
                           	<!-- 法人主体 -->
                            <div class="form-group" style="margin:5px 0">法人主体
                                <select id="corporationName" class="selectpicker show-tick form-control" multiple="multiple" data-live-search="false" name = 'legaler'>
                                    <option value='' selected='true'>全部</option>
                                    <option th:each="corporation :${corporationList}" th:value="${corporation.corporationId}" th:text="${corporation.corporationName}"></option>
                                </select>
                            </div>
                            <!-- 高级搜索 -->
                            <div class="btn-group marginTB-xs advanced-search" style="float: none; display: inline-block;margin-left:12px;">
                                <a type="button" data-toggle="dropdown" onclick="searchH()" class="uperSearch"> 高级搜索<img src="/images/new-vision/nav_right_user-name_arrow.png" /></a>
                            </div>
                        </div>
                        <div class="search_r">
                            <button type="button" class="btn btn-success marginTB-xs" onclick="searchResult()">搜索</button>
                            <img class="resetbutton" src="/images/icon_Advanced-search.png" onclick="searchReset()" />
                        </div>
                        <ul class="dropdown-menu" role="menu" id="searchH" style="display: none;">
                        	<!-- 采购单号 -->
                            <div class="form-group" style="margin:5px 0">采购单号
	                            <input type="text" id="purchaseOrderId" name="purchaseOrderId" class="form-control" placeholder="输入采购单号检索"/>
                           	</div>
                           	<!-- 采购日期 -->
                            <div class="form-group" style="margin:5px 0">采购日期
	                            <input size="16" type="text" id="purchaseBeginDate" name="from_date" value="" placeholder="填写开始时间" class="form-control form_datetime"/>
                           		<input size="16" type="text" id="purchaseEndDate" name="to_date" value="" placeholder="填写结束时间" class="form-control form_datetime"/>
                           	</div>
                           	<!-- 采购部门 -->
                            <div class="form-group" style="margin:5px 0">采购部门
                                <select class="selectpicker show-tick form-control" multiple="multiple" id="purchaseDepartment" data-live-search="false">
                                    <option value='' selected='true'>全部</option>
                                    <option th:each="department :${groupList}" th:value="${department.groupId}" th:text="${department.groupName}"></option>
                                </select>
                            </div>
							
							<div class="form-group" style="margin:5px 0">结算方式
                                 <select id="payMethod" class="selectpicker show-tick form-control" multiple="multiple" data-live-search="false" style="min-width: 215px;">
                                    <option value='' selected="true">全部</option>
                                    <option th:each="payWay :${payWayList}" th:value="${payWay.method}"
                                            th:text="${payWay.method}"></option>
                                </select>
                            </div>
                           	
                           	<div class="form-group">									
									<span>支付状态</span>
									<select id="orderStatus" class="selectpicker show-tick form-control" multiple="multiple" data-live-search="false" tabindex="-98">
										<option value = '' selected = 'true'>全部</option>
										<option value = '0'>未支付</option>
										<option value = '1'>已支付</option>
										<option value = '2'>已拒付</option>
										<option value = '3'>支付中</option>
									</select>									
							</div>                         
                           
                        </ul>
                    
                </div>
                <!-- 表格 -->
                <table id="table01" data-toggle="table" class="table table-striped table-hover look table-scroll"
                       data-query-params="query_params" data-pagination="true" data-side-pagination="server"
                       data-id-field="sku" data-unique-id="sku" data-page-size="20" data-page-list="[20, 50, 100, 200]"
                       data-sortable = "true" data-url = "search" >
                    <thead class="tableThead">
                    	<th data-checkbox='true'></th>     
                    	<th data-field = 'requestOrderId'>请款单号</th>
						<th data-field = 'billDate' >请款日期</th>
						<th data-field = 'corporationName' data-formatter="warpContent">法人主体</th>
 						<th data-field = 'supplierName' data-formatter="warpContent">供应商</th> 		
 						<th data-field = 'purchaseOrderId'  data-formatter="warpContent">采购单号</th>
            			<th data-field = 'purchaseOrderDate'>采购日期</th>	
            			<th data-field = 'type' data-formatter="toOrderType">单据类型</th>
 						<th data-field = 'currency'>币别</th>		
            			<th data-field = 'sumTotalMoney' data-formatter="toFormatMoney">订单金额</th>
            			<th data-field = 'sumInvoiceMoney' data-formatter="toFormatMoney">入库金额</th>
            			<th data-field = 'sumReceiMoney' data-formatter="toFormatMoney">货款金额</th>	
            			<th data-field = 'sumPayedMoney' data-formatter="toFormatMoney">已付金额</th>	
            			<th data-field = 'requestRatio'  data-formatter="toFormatMoney">付款比率</th>	
            			<th data-field = 'payWay' data-formatter="warpContent">结算方式</th>
            			<th data-field = 'requesterName'>请款人</th>
            			<th data-field = 'buyerName'>采购员</th>	
            			<th data-field = 'requestDeptName' data-formatter="warpContent">采购部门</th>	
            			<th data-field = 'payOrderId' data-formatter="warpContent">付款单号</th> 
            			<th data-field = 'thirdOrderId' data-formatter="formatContent">第三方订单编号</th>	
            			<th data-field = 'payStatus' data-formatter = 'toOrderStatus'>付款状态</th>
                    </thead>
                </table>

            </div><!-- ./smart-widget-inner -->
		</div>
        </div><!-- ./padding-md -->
    </div><!-- /main-container -->
    
    <!-- 引入页脚 -->
    <head th:include="decorators/tags/footer_mini"/>
</div>
<!-- 当前页面脚本 -->
<script type="text/javascript">
//日历插件配置
var aaa = new Date();
aaa.setMonth(new Date().getMonth()-1);
var nowtime = new Date();
$("#billBeginDate").datetimepicker({
    format: 'yyyy-mm-dd',
    autoclose: true,
    language: 'zh-CN',
    minView: '2',
    toggleActive: false,
    zIndexOffset: 1,
    endDate: nowtime
}).datetimepicker('setDate',aaa);
$("#billEndDate").datetimepicker({
    format: 'yyyy-mm-dd',
    autoclose: true,
    language: 'zh-CN',
    minView: '2',
    toggleActive: false,
    zIndexOffset: 1
}).datetimepicker('setDate',nowtime)
</script>
<script th:src="@{'/js/pay_order_report_list.js?v='+${version}}"></script>
</body>
</html>
